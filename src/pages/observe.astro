---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';
// import { useState } from 'react';

const metadata = {
  title: 'Observe',
};

// const min = 1;
// const max = 100;

// function handleSubmit(event) {
//   event.preventDefault();
//   const form = event.target;
//   const value = parseInt(form.elements['numberInput'].value, 10);

//   if (value < min || value > max) {
//     alert(`Value must be between ${min} and ${max}.`);
//   } else {
//     alert('Form submitted successfully!');
//   }
// }
---

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->

  <HeroText tagline="Observe" title="Control Panel" />
  <!-- the starting html with specific link to a instruction of observation -->
  <div
    class="max-w-xl mx-auto rounded-lg backdrop-blur border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-900 shadow p-4 sm:p-6 lg:p-8 w-full"
  >
    Go to <a
      class="bold underline border-yellow-500"
      href="https://stellarium-web.org/"
      target="_blank"
      rel="noopener noreferrer">Stellarium</a
    >, set the location as "Princeton", and time as currnet time. Then start to find your star and observe! A more
    detailed guide to find you stars is available <a
      class="bold underline border-yellow-500"
      href="https://docs.google.com/document/d/e/2PACX-1vQYncAuxxHOp9nn7c-zlQgzz-zZ5lejJGyGF9-J6DKV72fv0ySl7CmTAm-ej4Yr5AWlEQLJzjiJGXCa/pub"
      >here</a
    >.
  </div>

  <!-- HTML Form Structure
<form id="rangeValidationForm">
  <label for="numberInput">Enter a number:</label>
  <input type="number" id="numberInput" name="numberInput" required />
  <button type="submit">Submit</button>
</form>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('rangeValidationForm');
    
    if (form) {
      form.addEventListener('submit', (event) => {
        event.preventDefault();

        const input = document.getElementById('numberInput');
        
        if (input) {
          // Ensure the input value is treated as a number
          const value = parseInt(input.value, 10);

          // Check if the value is a valid number and within the specified range
          if (isNaN(value) || value < min || value > {{ max }}) {
            alert(`Please enter a number between ${min} and ${max}.`);
          } else {
            alert('Form submitted successfully!');
          }
        } else {
          console.error("Input element with ID 'numberInput' was not found.");
        }
      });
    } else {
      console.error("Form element with ID 'rangeValidationForm' was not found.");
    }
  });
</script> -->
  <!-- Explanation -->

  <ContactUs
    id="form"
    title="Control the PRISMS Small Radio Telescope"
    subtitle="New to radio astronomy? We're here to help!"
    inputs={[
      {
        type: 'text',
        name: 'name',
        label: 'Observation Label',
      },
      {
        type: 'number',
        name: 'frequency',
        label: 'Central Frequency (MHz)',
      },
      {
        type: 'number',
        name: 'bandwidth',
        label: 'Bandwidth (MHz)',
      },
      {
        type: 'number',
        name: 'duration',
        label: 'Duration (minutes)',
      },
      {
        type: 'text',
        name: 'location',
        label: 'Location',
      },
      {
        type: 'text',
        name: 'observer',
        label: 'Observer',
      },
      {
        type: 'email',
        name: 'email',
        label: 'Email',
      },
      {
        type: 'text',
        name: 'nbins',
        label: 'nbins',
      },
    ]}
    button="Start Observarion"
    description="We will send the observation data through email once it's complete."
  />
  <!--  textarea={{
      label: 'Message',
    }} -->
  <!-- Features2 Widget ************** -->

  <!-- <form id={handleSubmit}>
    <label for="numberInput">Enter a number:</label>
    <input type="number" id="numberInput" name="numberInput" required />
    <button type="submit">Submit</button>
  </form>
  
  <script>
    // JavaScript for form validation
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('validationForm').addEventListener('submit', (event) => {
        event.preventDefault();
        const input = document.getElementById('numberInput');
        const value = parseInt(input.value, 10);
  
        if (isNaN(value) || value < {{ min }} || value > {{ max }}) {
          alert(`Value must be between ${min} and ${max}.`);
        } else {
          alert('Form submitted successfully!');
          // Optionally, submit the form programmatically or perform further actions.
        }
      });
    });
  </script> -->

  <Features2
    title="We are here to help!"
    items={[
      {
        title: 'Website',
        description: 'probservatory.org',
        icon: 'tabler:device-desktop-star',
      },
      {
        title: 'Email',
        description: 'prisms.observatory@gmail.com',
        icon: 'tabler:mail',
      },
      {
        title: 'Location',
        description: '19 Lambert Dr, Princeton, NJ, USA',
        icon: 'tabler:map-pin',
      },
    ]}
  />
</Layout>
